/*! CriticalMassSternfahrtThemeHugo - 2016-06-07 */
function drawelement(a,b,c){return function(a){var d=L.geoJson(a,{style:L.mapbox.simplestyle.style,pointToLayer:function(a,b){return new L.marker(b,{icon:L.mapbox.marker.icon(a.properties),title:a.properties.Treffpunkt+": "+a.properties.Zeit,riseOnHover:!0})},onEachFeature:function(a,b){var c="";"LineString"===a.geometry.type?(c+='<div style="text-align:center;">'+a.properties.Strecke,a.properties.image&&(c+='<br><span class="fa fa-bicycle"></span>&nbsp;<strong>'+a.properties.Distanz+"</strong>"),c+="</div>"):(c+="<div style='text-align:center;'><strong>"+a.properties.Ort+"</strong><br><i>Treffpunkt:</i> <mark>"+a.properties.Treffpunkt+'</mark><br><span class="fa fa-clock-o"></span> <mark>'+a.properties.Zeit+"</mark>",a.properties.image&&(c+='<img src="'+a.properties.image.src+'" alt="'+a.properties.image.alt+'" class="img-rounded" width="100%">'),c+="</div>"),b.bindPopup(c)}});d.addTo(b),c&&b.fitBounds(d.getBounds())}}function makeMap(a,b,c){function d(){var a=$(window).height(),c=850;c>a&&(c=.7*a),$("#"+b).css("height",c+"px")}L.mapbox.accessToken="pk.eyJ1IjoibWl0cmFkc3R1dHRnYXJ0IiwiYSI6ImNaSko4cHcifQ.46Jz7d_F7BoNcrIiBLYUaQ",d(),$(window).resize(function(){d()});var e=L.mapbox.map(b,"mapbox.streets",{minZoom:9,maxZoom:18,center:[9.18,48.78],maxBounds:[[48,8.5],[49.5,9.75]]});a.length>2?(c=!1,e.fitBounds([[48.4,8.7],[49,9.6]])):c=!0,a.forEach(function(a){$.getJSON(a,drawelement(b,e,c))}),e.legendControl.addLegend("<strong>Critical Mass Sternfahrt</strong><br>12. Juni 2016")}